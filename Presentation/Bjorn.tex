%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% NAME %%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%
\section{Introduction}

\begin{frame}{Introduction}{Overview}
  \begin{figure}[H]
	\centering
	%\includegraphics[scale=0.65]{Pictures/Cubli12.png}
  \end{figure}
\end{frame}

% ---------------------------------------------------
\section{System Description}

\begin{frame}{System Description}{Overview}

  \begin{minipage}{\linewidth}
  	\begin{minipage}{0.45\linewidth}
  		\begin{figure}[H]
  			\includegraphics[scale=0.5]{Pictures/Cubli-3.png}
  			\centering
  		\end{figure}
  	\end{minipage}
  	\hspace{0.03\linewidth}
  	\begin{minipage}{0.45\linewidth}
  		\begin{figure}[H]
  			\includegraphics[scale=0.5]{Pictures/Cubli-1.png}
  			\centering
  		\end{figure}
  	\end{minipage}
  \end{minipage}

\end{frame}

\begin{frame}{System Description}{Overview}
	\begin{figure}[H]
		\centering
		\includegraphics[scale=0.16]{Pictures/Cubli12.png}
	\end{figure}
\end{frame}

% -------------------------------------------------------
\section{Requirements}

\begin{frame}{Requirements}{Overview}
\begin{itemize}
 \item {Keep balancing at 0 rad when starting from equilibrium position}
  \begin{itemize}
	%\item {Starting out from equilibrium position at null velocity}
	\item {Starting with the wheel at \si{0\ rad/s}}
	\linebreak
\end{itemize}
\item {Still balance with changing angles of the baseplate}
	\begin{itemize}
	\item {Baseplate moves within reasonable range}
	\item {Use IMU to measure the angle of the frame}
	\end{itemize}
\end{itemize}


\end{frame}

% -----------------------------------------------------------------
\section{Model}

\begin{frame}{Model}{Overview}
	\begin{figure}[H]
		\centering
		\includegraphics[scale=0.5]{Pictures/mechanicalSystem.pdf}
	\end{figure}
\end{frame}

\begin{frame}{Model}{freebody diagram of the wheel}
	\begin{figure}[H]
		\centering
		\includegraphics[scale=0.40]{Pictures/freeBodyWheel.pdf}
	\end{figure}
	\begin{displaymath}	
	  \si{ J_w (\vec{\ddot{\theta}_F} + \vec{\ddot{\theta}_w}) =} 
	  \si{ \vec{\tau_m} - B_w \vec{\dot{\theta}_w }}
	\end{displaymath}
\end{frame}

\begin{frame}{Model}{freebody diagram of the frame}
	\begin{figure}[H]
		%\centering
		\includegraphics[scale=0.40]{Pictures/freeBodyFrame.pdf}
	\end{figure}
	\begin{displaymath}
	\si{J_F \vec{\ddot{\theta}_F} =}
	\si{-B_F \vec{\dot{\theta}_F} + \vec{l_F} \times (m_F\cdot \vec{g}) + \vec{l_w} \times \vec{F} - \vec{\tau_m} + B_w \vec{\dot{\theta}_w}}
	\end{displaymath}
	
	
\end{frame}

\begin{frame}{Model}{Construction}
		\begin{flalign}
		\si{\vec{l_w} \times \vec{F}}
		\end{flalign}
		
		\begin{flalign}
		\si{\vec{l_w} \times \vec{F}} &=
		\begin{vmatrix}
		\ \si{\vec{\hat{i}}} \nonumber               & \si{\vec{\hat{j}}} \nonumber              & \si{\vec{\hat{k}}}\nonumber \ \ \ \\ 
		\ \si{ l_w \cdot cos( \theta_F ) }\nonumber  & \si{ l_w \cdot sin( \theta_F ) }\nonumber & 0 \nonumber                 \ \ \ \\ 
		\ \si{ F_x }      \nonumber                  & \si{ F_y }      \nonumber                & 0      \nonumber            \ \ \  
		\end{vmatrix}\nonumber
		\end{flalign}
		
		\begin{flalign}
		\si{ \vec{l_w} \times \vec{F} = (-{l_w}^2 \cdot m_w \ddot{\theta}_F + l_w\ sin(\theta_F)\ m_w \cdot g ) \cdot \hat{k}} \nonumber
		\end{flalign}
		
\end{frame}

\begin{frame}{Model}{Construction}
Acceleration of the frame
\small
	\begin{flalign}
	 \si{\ddot{\theta}_F =} &\si{ -\frac{B_F}{J_F + m_w \cdot {l_w}^2} \cdot \dot{\theta}_F + \frac{(m_F \cdot l_F + m_w \cdot l_w) \cdot g}{J_F + m_w \cdot {l_w}^2} \cdot sin(\theta_F) }& \nonumber \\ 
		&\si{- \frac{1}{J_F + m_w \cdot {l_w}^2} \cdot \tau_m + \frac{B_w}{J_F + m_w \cdot {l_w}^2} \cdot \dot{\theta}_w} & \nonumber
	\end{flalign}
	\vspace{0.5cm}
\normalsize	
%

Acceleration of the wheel
\small
	\begin{flalign}
	\si{\ddot{\theta}_w =} &\si{\frac{J_w+J_F+m_w \cdot {l_w}^{2}}{J_w \cdot (J_F+m_w \cdot {l_w}^{2})} \cdot \tau_m - \frac{(J_w+J_F+{l_w}^{2} \cdot m_w) \cdot B_w}{J_w \cdot (J_F+m_w \cdot  {l_w}^2)} \cdot \dot{\theta}_w}& \nonumber \\
	&\si{ - \frac{(m_F \cdot l_F + m_w \cdot l_w) \cdot g}{J_F+m_w \cdot {l_w}^{2}} \cdot sin(\theta_F) + \frac{B_F}{J_F+m_w \cdot {l_w}^{2}} \cdot \dot{\theta}_F} & \nonumber
	\end{flalign}
\normalsize
	
\end{frame}

\begin{frame}{Model}{Linearization}
	
	
\end{frame}

\begin{frame}{Model}{Linearization}
	\begin{itemize}
		\item {Operating point \si{\theta_{F_0}}}
		\begin{itemize}
			\item {variation around operating point is \si{\Delta \theta_F}}
		\end{itemize}
	\end{itemize}
		\begin{flalign}
		&\si{(J_F+m_w \cdot {l_w}^{2}) \Delta \ddot{\theta}_F =}& \nonumber \\
		&\si{-B_F \Delta \dot{\theta}_F +  ( m_F \cdot l_F + m_w \cdot l_w ) \cdot g \cdot \Delta \theta_F - \Delta \tau_m + B_w \Delta \dot{\theta}_w }& \nonumber
		\end{flalign}
		
\end{frame}

\begin{frame}{Model}{Blockdiagram}
	\begin{figure}[H]
		\centering
		\input{Pictures/blockDiagram.tikz}
	\end{figure}
\end{frame}
%\section{Hardware and Software}
%%%%%%%%%%%%%%%%%
%\subsection{Prototype overview}
%
%\begin{frame}{Hardware and Software}{Prototype overview}
%  \begin{figure}[H]
%	\centering
%	\includegraphics[scale=0.65]{Pictures/SO3.pdf}
%  \end{figure}
%\end{frame}
%%%%%%%%%%%%%%%%%
%
%%%%%%%%%%%%%%%%%
%\subsection{Hardware components}
%
%\begin{frame}{Hardware and Software}{Hardware components}
%\textbf{Controller}
%\begin{itemize}
%\item{Arduino Mega 2560}
%\end{itemize}
%  \begin{figure}[H]
%	\centering
%	\includegraphics[scale=0.4]{Pictures/ArduinoMega.png}
%  \end{figure}
%\end{frame}
%
%\begin{frame}{Hardware and Software}{Hardware components}
%\textbf{Velocity Sensor}
%\begin{itemize}
%\item{Hall Sensor}
%\end{itemize}
%  \begin{figure}[H]
%	\centering
%	\includegraphics[scale=1.5]{Pictures/hallSensorDrawing.pdf}
%  \end{figure}
%\end{frame}
%
%\begin{frame}{Hardware and Software}{Hardware components}
%\textbf{Angular Sensor}
%\begin{itemize}
%\item{HMC5883L Magnetometer}
%\end{itemize}
%
%  \begin{minipage}{\linewidth}
%  	\begin{minipage}{0.45\linewidth}
%  		\begin{figure}[H]
%  			\includegraphics[scale=0.7]{Pictures/NineDegree.jpg}
%  			\centering
%  		\end{figure}
%  	\end{minipage}
%  	\hspace{0.03\linewidth}
%  	\begin{minipage}{0.45\linewidth}
%  		\begin{figure}[H]
%  			\includegraphics[scale=0.35]{Pictures/Magne.pdf}
%  			\centering
%  		\end{figure}
%  	\end{minipage}
%  \end{minipage}
%
%\end{frame}
%
%
%
%
%\begin{frame}{Hardware and Software}{Hardware components}
%\textbf{Position Sensor}
%\begin{itemize}
%\item{Games on Track system (GoT)}
%\end{itemize}
%  \begin{figure}[H]
%	\centering
%	\includegraphics[scale=0.6]{Pictures/GOTNew.pdf}
%  \end{figure}
%\end{frame}
%
%\begin{frame}{Hardware and Software}{Hardware components}
%\begin{itemize}
%\item {Communication}
%\item {Storage}
%\item {Motor driver}
%\item {Battery and Power monitor}
%\end{itemize}
%\end{frame}
%%%%%%%%%%%%%%%%%
%
%%%%%%%%%%%%%%%%%
%\subsection{Software}
%
%\begin{frame}{Hardware and Software}{Software}
%\begin{itemize}
% \item {Real Time Operating System}
%  \begin{itemize}
%	\item {KRNL by Jens Dalsgaard Nielsen}
%\end{itemize}
%\end{itemize}
%
%  \begin{figure}[H]
%	\centering
%	\includegraphics[scale=0.35]{Pictures/scheduleRequest.pdf}
%  \end{figure}
%
%  \begin{figure}[H]
%	\centering
%	\includegraphics[scale=0.3]{Pictures/schedulePriorities.pdf}
%  \end{figure}
%\end{frame}